<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 5.0//EN">
<html>
<head>
<title>LDAP Address Book - User Guide</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="styles.css" type="text/css">
<link rel="icon" type="image/png" href="addressbook24.png">
</head>
<body>

<table>
  <tr>
    <td style="background-color:white">
      <img alt="LDAP Address Book Icon" src="addressbook48.png">
    </td>
    <th style="background-color:white;text-align:left">
      <h1 style="margin:0">LDAP Address Book</h1>
      <div style="font-weight:normal">Web-based LDAP address book browser/editor</div>
    </th>
  </tr>
</table>
<hr>
<h1>Contents</h1>

<ol>
<li><a href="#getting_started">Getting Started Using the Address Book</a>
  <ol>
  <li>Mozilla Firefox Search Integration
  <li>Google Chrome/Chromium Search Integration
  </ol>
<li><a href="#installation">Installation and Basic Setup</a>
  <ol>
  <li>Upgrading from Previous Versions
  <li>Installation on Linux: Apache HTTP Server on Debian/Ubuntu
  <li>Installation on Windows: Apache HTTP Server or Microsoft IIS
  <li>Set up access to the directory service
  <li>What is an LDAP distinguished name (DN)?
    <ol>
    <li>DNs as shown in Active Directory Users and Computers
    <li>DNs as shown in Novell iManager or ConsoleOne
    </ol>
  </ol>
<li><a href="#config_users">Configuring Users and Permissions</a>
    <ol>
    <li>Require users to log in with a user name and password
    <li>Only allow users in a paricular OU to log in
    <li>Grant additional permissions to a specific user
    <li>Grant permissions based on LDAP group membership
    <li>Grant access to the Address Book based on LDAP group membership
    <li>Deny access to the Address Book for a specific user
    <li>Changing the user DN search behavior
    </ol>
<li><a href="#customising">Customising the Address Book</a>
  <ol>
  <li>Changing the attributes shown for search results
  <li>Applying language-specific sorting rules for search results
  <li>Applying custom LDAP filters to directory browsing and searching
  <ol>
    <li>Directory browsing
    <li>Search results
  </ol>
  <li>Changing the layout and attributes shown for directory entries
  <li>Displaying thumbnail photos or logos when browsing/searching the directory
  <li>Setting up phone numbers to be dialed when clicked on
  <li>Changing the links shown in the page footer
  <li>Changing the look and formatting of the address book
  <li>Changing the country code interpretation
  <li>Extending and modifying the schema
  </ol>
<li><a href="#config_reference">Configuration Reference</a>
</ol>
<hr>
<a name="getting_started"></a>
<h2>Getting Started Using the Address Book</h2>
<p>
LDAP Address Book is a web application for browsing and searching
for contact details within an LDAP directory service, allowing it
to be used as an address book. It has been tested on the following
LDAP directories:
</p>
<ul>
<li>Active Directory (Microsoft and Samba implementations)
<li>Novell eDirectory
<li>OpenLDAP (provisional support)
</ul>
<p>
Searching your LDAP address book is pretty easy. Just type in
the name, job title or company of who you're trying to find into
search box and click "Search" (or press Return). Alternatively
if the directory has been classified into "organisational units"
(OUs) you can click on the folders underneath the search box to browse
records by department, building, etc.
</p>
<p>
<img alt="How to Search or Browse the Address Book" src="search_browse.png">
</p>
<p>
You can add the LDAP Address Book as a search engine in Firefox,
Google Chrome/Chromium and other OpenSearch compliant web browsers,
allowing you to search more easily.
</p>
<h3>Mozilla Firefox Search Integration</h3>
<p>
To add the Address Book as a search engine in Firefox:
</p>
<ol>
<li>Open web browser and navigate to the address book.
<li>Click the icon to the left of the search engine name in the search
box.
<li>Select <b>Add "Address Book"</b> (or the name of your address
book, if it has been changed from the default) from the menu.
</ol>
<p>
<img alt="Address book OpenSearch integration in Firefox" src="opensearch_firefox.png">
</p>
<h3>Google Chrome/Chromium Search Integration</h3>
<p>
To add the Address Book as a search engine in Google Chrome or Chromium:
</p>
<ol>
<li>Open web browser and navigate to the address book.
<li>Chromium/Google Chrome will automatically add the
    LDAP Address Book to the available search engines.
</ol>
<p>
To search the Address Book, first enter the first few characters
of the site URL, then press <kbd>Tab</kbd> when prompted.
</p>
<p>
<img alt="Selecting Address Book OpenSearch in Chromium Browser" src="opensearch_chromium1.png">
</p>
<p>
Now enter the name you wish to search for.
</p>
<p>
<img alt="Using Address Book OpenSearch in Chromium Browser" src="opensearch_chromium2.png">
</p>
<hr>
<a name="installation"></a>
<h2>Installation and Basic Setup</h2>
<p>
The remainder of this document is aimed towards system administrators
setting up and configuring LDAP address book on your network.
</p>
<h3>Upgrading from Previous Versions</h3>
<p>
The general method of upgrading to a new version of the Address Book
is to replace the application's program files with those from the
new release.
</p>
<p>
In many cases your previous configuration (stored in file
<code>config.php</code>) can be reused with only minor changes
(if any). Details of what needs to be done for each version
can be found on the project Wiki:
</p>
<p>
<a href="https://sourceforge.net/p/ldap-addr-book/wiki/Home/">
https://sourceforge.net/p/ldap-addr-book/wiki/Home/</a>
</p>
<p>
This information is available for version 0.10 onwards.
</p>
<h3>Installation on Linux: Apache HTTP Server on Debian/Ubuntu</h3>
<p>
Install Apache HTTP Server, together with PHP and PHP/LDAP integration:
</p>
<pre>
apt-get install apache2 php5 libapache2-mod-php5 php5-intl php5-ldap
</pre>
<p>
Decide where you want to store the address book web site's files
and unpack the address book tar.gz file to the web site directory.
For the purposes of this guide, this location is assumed to be
<code>/srv/www/addressbook.example.org</code> and the URL of the
address book <code>http://addressbook.example.org/</code>, in
which case you might type:
</p>
<pre>
mkdir -p /srv/www/addressbook.example.org
cd /srv/www/addressbook.example.org
tar xvzf ~/ldap-addr-book-0.02.tar.gz
</pre>
<p>
Create the file
<code>/etc/apache2/sites-available/addressbook.example.org</code>
and add the following contents:
</p>
<pre>
&lt;VirtualHost *:80&gt;
        DocumentRoot /srv/www/addressbook.example.org
        ServerAdmin webmaster@example.org
        ServerName addressbook.example.org

        ServerSignature email
        DirectoryIndex index.html index.php

        LogFormat "combined"
        TransferLog /var/log/apache2/addressbook.example.org-access_log
        ErrorLog /var/log/apache2/addressbook.example.org-error_log
&lt;/VirtualHost&gt;
</pre>
<p>
Enable the site by running the command:
</p>
<p>
<code>a2ensite addressbook.example.org</code>
</p>
<p>
Perform a graceful restart of Apache in order to re-read the
configuration and make the new web site live:
</p>
<p>
<code>apache2ctl graceful</code>
</p>

<p>
Finally create a DNS record for the address book web site, e.g.:
</p>
<pre>addressbook.example.org.	IN	CNAME	myserver
</pre>

<h3>Installation on Windows: Apache HTTP Server or Microsoft IIS</h3>

<p>
In outline, the procedure to set up the LDAP Address Book to run
under Windows is as follows:
</p>

<ul>
<li>Install preferred web server (e.g. Apache HTTP Server or Microsoft IIS).

<li>Download PHP 5, e.g. from 
    <a href="http://windows.php.net/download/">http://windows.php.net/download/</a>
    or a trusted mirror.

<li>Install PHP 5, ensuring that LDAP and INTL support are both enabled.

<li>Set up a new virtual host or folder for the Address Book and
    extract the install media to it.

<li>If necessary, create a DNS record for the address book web site.
</ul>

<h3>Set up access to the directory service</h3>
<p>
First, copy (or rename) the sample configuration file supplied with
LDAP Address Book, <code>config.php.sample</code> to <code>config.php</code>.
</p>
<p>
Open the file in your preferred text editor and change the following settings
to tell the application where your Address Book data is stored:
</p>
<ul>
<li><p><code>$ldap_server</code> - Specify the type, host name and
    (optionally) port number of the LDAP directory server (domain controller)
    to connect to.</p>

<li><p><code>$ldap_base_dn</code> - Set to the location in the directory
(e.g. OU) that should be used as the "root" of the address book information.</p>
</ul>
<p>
See the <a href="#config_reference">Configuration Reference</a> section
below for further information on these and other settings.
</p>
<p>
Note: Windows users may experience problems opening the <code>config.php</code>
file using the default "Notepad" text editor. Try downloading and using
<a href="https://notepad-plus-plus.org/">Notepad++</a> instead, which should
be able to open and edit the file correctly.
</p>
<p>
Some LDAP directory servers will allow limited read access without having to
enter any user name or password (known as allowing "anonymous bind" access).
If your directory is set up to allow this then you should be able to open the
LDAP Address Book in your web browser and view its contents.
</p>
<p>Note: Anonymous access may have very limited read permissions. Some
attributes (e.g. telephone numbers) may appear blank unless you log in by
name.
</p>
<p>
If anonymous access is not allowed then you'll get the message
"Please log in to use the address book" when you open the LDAP Address
Book in your web browser.
</p>
<p>
The LDAP Address Book will need at least one user login account on the
directory service in order to access its contents. This can be either:
</p>
<ul>
<li>A generic "anonymous" user account, which is used automatically.
    This typically provides read-only access for searching or browsing
    records.
<li>Individual (named) login accounts. These can be given additional
    permissions, e.g. creating and editing of records.
</ul>
<p>
If you just want to get the LDAP Address Book up and running quickly, set
up a new user account that provides read-only access to your directory,
open the <code>config.php</code> in your preferred text editor and locate
the following section:
</p>
<pre>
$ldap_server-&gt;add_user("__ANONYMOUS__",
        array(
                // LDAP login (or bind DN) to connect to the directory
                //
                // If the LDAP server is set up to allow "anonymous bind"
                // then the the user name and password can be left blank,
                // otherwise replace with a "generic" user that has read
                // permission.

                <strong>"ldap_dn"=&gt;"",</strong>
                <strong>"ldap_password"=&gt;"",</strong>

                // Permissions granted to anonymous users:

                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true
        ));
</pre>
<p>
Fill in the values of "ldap_dn" and "ldap_password" with the user account's
DN and password. Once the details are correct you should be able to open the
LDAP Address Book in your web browser and view its contents.
</p>
<p>
The section <a href="#ldap_dn">What is an LDAP distinguished name (DN)?</a>
(below) gives more information about LDAP DNs and how to fill in the
<code>ldap_dn</code> setting correctly. It is also possible to configure
individual logging in with individual user names and passwords - see
<a href="#config_users">Configuring Users and Permissions</a> for more
information.
</p>
<a name="ldap_dn"></a>
<h3>What is an LDAP distinguished name (DN)?</h3>
<p>
You'll need to use LDAP distinguished names (DNs) in a few places when
configuring the LDAP Address Book:
</p>
<ul>
<li>To specify which part of the LDAP directory contains the
   Address Book data.
<li>When setting up users and permissions.
</ul>
<p>
This section gives a brief overview of what a DN is and how to find
which DNs to use when configuring the Address Book.
</p>

<p>
LDAP records are organised into a "directory information tree" (DIT)
of categories and subcategories - similar to how files and folders
(directories) are stored on a computer's hard disc.
</p>
<p>
Each record in the directory is identified by it's name and location
within the tree - known as its "Distinguished Name" or DN. A
distinguished name consists of a comma-separated representing
the "navigation path" through the tree to the object.
Here's an example:
</p>
<p>
<code>CN=John Doe,OU=Friends,O=BigCorp</code>
</p>
<p>
Each item in the list is represented by an attribute and its value.
In the above example:
</p>
<ul>
<li>"CN=John Doe" means the the object's CN (common name/full name)
   attribute has the value "John Doe".
<li>"OU=Friends" means that the OU (organizational unit name)
   attribute of the location that contains the "John Doe" record
   has the value "Friends".
<li>"O=BigCorp" means that the O (organization name) attribute
   of the location that contains "Friends" has the value "BigCorp".
</ul>
<p>
The attribute used to identify each item varies according to its
type, for example:
</p>
<ul>
<li>People are generally identified by their full name (or "common name", CN).
<li>People within an organization's LDAP directory are often grouped
    into departments or divisions, identified by their "organizational unit
    name" (OU).
<li>A company or other organization is identified by its
    "organization name" (O).
</ul>
<p>
Here's how to work out the DNs from the graphical admin tools
for Microsoft Active Directory and Novell eDirectory.
</p>
<h4>DNs as shown in Active Directory Users and Computers</h4>
<p>
The Active Directory Users and Computers admin tool shows the
LDAP directory tree in the left-hand panel of its window. Icons
are used to represent the type of each object.
</p>
<p>
<img alt="Active Directory Users and Computers showing example AD domain layout" src="ad.png">
</p>
<p>
The top-level object shown in Active Directory Users and Computers
is the domain. The name of the domain is shown as a series of
elements separated by dots (e.g. <code>turnersoft.co.uk</code>),
however this is not the domain's LDAP distinguished name. Each element
of the domain name is represented as a separate <em>domain component</em> (DC)
in LDAP notation:
</p>
<p>
<code>DC=turnersoft,DC=co,DC=uk</code>
</p>
<p>
The second-level elements within the domain include organizational
units (shown with a folder icon overlaid with a book/grey blob)
and containers (shown as a folder icon without a book).
</p>
<p>
The DN of the "Home" organizational unit in the above screenshot is:
</p>
<p>
<code>OU=Home,DC=turnersoft,DC=co,DC=uk</code>
</p>
<p>
If you wanted the LDAP Address Book to show only the contents
of the "Home" organizational unit, you'd configure the
<code>$ldap_base_dn</code> setting (in <code>config.php</code>)
as follows:
</p>
<p>
<code>$ldap_base_dn = "OU=Home,DC=turnersoft,DC=co,DC=uk";</code>
</p>
<p>
Containers are similar to organizational units, but are named
using their CN (common name) attribute. The DN of the "Users"
container is:
</p>
<p>
<code>CN=Users,DC=turnersoft,DC=co,DC=uk</code>
</p>
<p>
Users are named using their CN (common name) attribute. For
example, the DN of the <code>Administrator</code> user for this domain
is
</p>
<p>
<code>CN=Administrator,CN=Users,DC=turnersoft,DC=co,DC=uk</code>
</p>
<p>
LDAP Address Book also allows you to specify an Active Directory
user by their User Principle Name (UPN), i.e. their user login name
followed by <code>@</code> followed by the domain's DNS name (or
other allowed UPN suffix, if any have been configured). This
allows a user to be specified independently of its position in
the directory information tree.
</p>
<p>
The <code>Administrator</code> user for this domain has the UPN:
</p>
<p>
<code>Administrator@turnersoft.co.uk</code>
</p>
<h4>DNs as shown in Novell iManager or ConsoleOne</h4>
<p>
The iManager and ConsoleOne admin tools also show the
LDAP directory structure as a tree of objects. As with
Active Directory Users and Computers, icons are used to represent
the type of each object.
</p>
<p>
<img alt="Novell iManager showing example eDirectory tree layout" src="edir.png">
</p>
<p>
The top-level object is the tree, which is not included in the
LDAP DN. The DN of the "turnersoft" organization in the above
screenshot is:
</p>
<p>
<code>o=turnersoft</code>
</p>
<p>
The DN of the "Home" organizational unit in the above screenshot
is:
</p>
<p>
<code>ou=home,o=turnersoft</code>
</p>
<p>
Users are named using their CN (common name) attribute. For
example, the DN of the "admin" user for this tree is:
</p>
<p>
<code>cn=admin,o=turnersoft</code>
</p>
<hr>
<a name="config_users"></a>
<h2>Configuring Users and Permissions</h2>
<p>
The LDAP address book supports logging in with named user
accounts. Typically, this is used by administrators
who are permitted to edit the address book contents, or
if you need to limit browsing/searching access to known
users.
</p>
<p>
Once per-user access has been set up, users can log in
with their own user names and passwords by clicking the
"log in" link in the top-right corner of each page.
(This link is not displayed if only anonymous access has been
configured.)
</p>
<p>
<img alt="Log In link - Visible when per-user login enabled" src="login_enabled.png">
</p>
<p>
User login names, passwords and permissions are taken from the
LDAP directory itself rather than the address book application.
</p>
<p>
LDAP does not provide any (standard) way of retreiving a
user's permissions, so the <code>$ldap_server-&gt;add_user()</code>
configuration command should be used to tell the Address Book
which facilities should be made available to each user.
within the back-end directory.
</p>
<p>
Three types of user mapping can be defined:
</p>
<ul>
<li><p>The special user name <code>__ANONYMOUS__</code> is used to specify the
    LDAP credentials to be used and permissions to be given when nobody
    is logged in by name. (If the <code>__ANONYMOUS__</code> user is
    not configured then all users will have to log in by name in order to
    browse the directory. If it is used, the <code>__ANONYMOUS__</code> user
    should be given read-only access.)</p>

<li><p>The special login name <code>__DEFAULT__</code> is used to specify the
    permissions to be given when a user has logged in by name.</p>

<li><p>An individual user's login name can be assigned a different set of
    permissions to those granted to <code>__DEFAULT__</code>.
    This is typically used when setting up an "admin" user for the
    address book.</p>

</ul>
<p>
The following settings can be applied to each user map entry
in order to enable or disable various features of the
address book. To use each feature, the necessary permissions
will also need to be granted within the back-end directory.
</p>
<table border=1>
<tr><th>Setting</th><th>Description</th></tr>

<tr><td><code>ldap_dn</code></td><td>Specifies the LDAP DN (or alternatively
    the UPN when used with Active Directory) used to log in to the
    directory. The token <code>__USERNAME__</code> will be replaced
    by the actual user name as typed into the login dialogue. If not
    set then the Address Book will search for the user's DN automatically.
    </td></tr>

<tr><td><code>ldap_password</code></td><td>Specifies the password to
    be used when connecting to the directory. This is only used for
    the <code>__ANONYMOUS__</code> user.</td></tr>

<tr><td><code>allow_browse</code></td><td>Allows the user to browse through
 organisational units (folders) within the address book.</td></tr>

<tr><td><code>allow_create</code></td><td>Allows the user to create new
 records within the address book. They will also need to be granted
 <code>allow_edit</code> in order to populate and save the new record's attributes.</td></tr>

<tr><td><code>allow_delete</code></td><td>Allows the user to delete records
 within the address book.</td></tr>

<tr><td><code>allow_edit</code></td><td>Allows the user to edit records
 within the address book.</td></tr>

<tr><td><code>allow_edit_self</code></td><td>Allows the user to edit only
    their own record within the address book.</td></tr>

<tr><td><code>allow_search</code></td><td>Allows the user to search the
    address book directory tree.</td></tr>

<tr><td><code>allow_view</code></td><td>Allows the user to click on a record
    to see full details</td></tr>

<tr><td><code>allow_export</code></td><td>Allows the user to save/export
    (individual) records as vCard electronic business cards.</td></tr>

<tr><td><code>allow_export_bulk</code></td><td>Allows the user to
    export entire OUs of records (or the complete address book) in vCard
    format, for example to import into another address book or
    contact database that doesn't support LDAP directly.</td></tr>

<tr><td><code>allow_folder_info</code></td><td>Allows the user to view
    and (if <code>allow_edit</code> is also granted) edit folders, OUs and
    other container objects.</td></tr>

<tr><td><code>allow_login</code></td><td>Allows the user to log in to the
    directory. This permission is granted automatically if not specified
    explicitly.</td></tr>

<tr><td><code>allow_ldap_path</code></td><td>Allows the user to see the
    location of the current entry in the "navigation path" at the top
    of the screen. This permission is granted automatically if not specified
    explicitly.</td></tr>

<tr><td><code>allow_system_admin</code></td><td>Allows the user to see
    LDAP server information (root DSE record) and access records other than
    those under <code>$ldap_base_dn</code>.</td></tr>

<tr><td><code>display_all_records_by_default</code></td><td>Displays a
    list of all searchable records by default, rather than the objects
    located directly under <code>$ldap_base_dn</code>.</td></tr>

</table>
<h3>Require users to log in with a user name and password</h3>
<p>
The following example shows how to grant all logged in users permission
to browse, search or view the Address Book (assuming the
<code>__ANONYMOUS__</code> user has been disabled or removed from the
configuration):
</p>
<pre>
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true
        ));
</pre>
<h3>Only allow users in a paricular OU to log in</h3>
<p>
The following example shows how to allow only those users in a particular
OU to log in to browse, search or view the Address Book:
</p>
<pre>
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
		"ldap_dn"=&gt;"cn=__USERNAME__,dc=home",
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true
        ));
</pre>
<h3>Grant additional permissions to a specific user</h3>
<p>
The following example shows how to grant additional permissions to a
specific user. The user name "admin" will be logged in using
with Active Directory UPN <code>Administrator@example.org</code>
(the default domain administrator).
</p>
<pre>
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true,
                "allow_folder_info"=&gt;true
        ));
$ldap_server-&gt;add_user("admin",
        array(
                "ldap_dn"=&gt;"Administrator@example.org",
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true,
                "allow_create"=&gt;true,
                "allow_edit"=&gt;true,
                "allow_delete"=&gt;true,
                "allow_export"=&gt;true,
                "allow_export_bulk"=&gt;true
        ));
</pre>
<p>
Permissions granted to a user by name will be used instead of
the <code>__DEFAULT__</code> permissions. In the above example,
<code>admin</code> will not receive the <code>allow_folder_info</code>
permission.
</p>
<h3>Grant permissions based on LDAP group membership</h3>
<p>
Permissions can be granted to an LDAP group using the
<code>$ldap_server-&gt;add_group()</code> configuration command. Members
of the group will receive the group's permissions. In the following
example, logged in users will receive permissions to browse, search
and view the Address Book. Users who are members of the
<code>Address Book Admins</code> are also granted permission
to create, edit and delete records.
</p>
<pre>
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true
        ));

$ldap_server-&gt;add_group("cn=Address Book Admins,ou=HR,o=BigCorp",
        array(
                "allow_create"=&gt;true,
                "allow_edit"=&gt;true,
                "allow_delete"=&gt;true
        ));
</pre>
<p>
Alternatively, permissions can be granted according to LDAP group
membership by specifying the group name as the permission's value.
The following example shows how to use this method:
</p>
<pre>
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true,
                "allow_create"=&gt;"cn=Address Book Admins,ou=HR,o=BigCorp",
                "allow_edit"=&gt;"cn=Address Book Admins,ou=HR,o=BigCorp",
                "allow_delete"=&gt;"cn=Address Book Admins,ou=HR,o=BigCorp"
        ));
</pre>
<p>
Note:
</p>
<ul>
  <li>The user must be have sufficient access the back-end directory
  to read the group membership.</li>
  <li>Group memberships cannot be used to assign permissions for the
  <code>__ANONYMOUS__</code> user.</li>
</ul>
<h3>Grant access to the Address Book based on LDAP group membership</h3>
<p>
The <code>allow_login</code> permission can be used to decide whether
users will be allowed to log in to the address book. It is automatically
granted if not explicitly defined. The following example shows how to grant
login permission based on group membership:
</p>
<pre>
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true,
                "allow_login"=&gt;"cn=Address Book Users,ou=HR,o=BigCorp"
        ));
</pre>
<h3>Deny access to the Address Book for a specific user</h3>
<p>
A specific user can be prevented from accessing the address book
(whilst continuing to allow others to log in) by setting their
"allow_login" permission to "false". For example, the following
might be used to prevent the directory's top-level administrative
account from being (mis)used to browse the address book:
</p>
<p>
<code>$ldap_server-&gt;add_user("Administrator",array("allow_login"=&gt;false));</code>
</p>
<h3>Changing the user DN search behavior</h3>
<p>
The LDAP Address Book searches the directory in order to
determine a user's DN during the login process.
</p>
<p>
By default, the Address Book will search for login user accounts
in the same area of the directory as the address book data
(i.e. under the location indicated by $ldap_base_dn). If you
wish to store the login accounts in a different location outside
of this area (e.g. for security reasons) then the setting
<code>$ldap_server-&gt;dn_search_base</code> can be used:
</p>
<p>
<code>$ldap_server-&gt;dn_search_base = "CN=Users,DC=example,DC=org";</code>
</p>
<p>
Searching is carried out using an anonymous connection
by default. The <code>$ldap_server-&gt;dn_search_user</code>
and <code>$ldap_server-&gt;dn_search_password</code> settings
can be used to specify a different account to use when searching
for a user's DN:
</p>
<p>
<code>$ldap_server-&gt;dn_search_user = "CN=ldap-browse,OU=Service Accounts,DC=example,DC=org";<br>
$ldap_server-&gt;dn_search_password = "foobar";</code>
</p>
<a name="customising"></a>
<h2>Customising the Address Book</h2>
<h3>Changing the attributes shown for search results</h3>
<p>
The fields/attributes that are used when searching can be customised
by editing the contents of <code>$search_ldap_attrib</code>
in the configuration file. The default setting is:
</p>
<pre>
$search_ldap_attrib = array(
        "cn","mail","sn","displayName","company","title");
</pre>
<p>
...which searches the following set of attributes:
</p>
<table border=1>
<tr><th>Attribute</th><th>Description (typical usage)</th></tr>
<tr><td><code>cn</code></td><td>Name of the directory entry itself
    (usually a person's full name or "common name")</td></tr>
<tr><td><code>mail</code></td><td>E-mail address</td></tr>
<tr><td><code>sn</code></td><td>Surname</td></tr>
<tr><td><code>displayName</code></td><td>Perferred display version of
    user's name. Some users may prefer informal versions of their
    name (e.g. "Andy" instead of "Andrew"), which would be represented
    here.</td></tr>
<tr><td><code>company</code></td><td>Company name</td></tr>
<tr><td><code>title</code></td><td>Job title</td></tr>
</table>
<p>
See your directory service's schema documentation for
other attributes which are available to be searched.
</p>
<p>
The columns that appear in search results can be changed
by editing the contents of <code>$search_result_columns</code> in the
config file.
</p>
<p>
The special attribute <code>sortableName</code> can be used to display a
"sort-friendly" version of a personal name (Surname, Firstname)
where this information is available. (This is constructed from
the <code>sn</code> and <code>givenName</code> attributes if populated,
otherwise falling back to <code>displayName</code> and <code>cn</code>.)
</p>
<h3>Applying language-specific sorting rules for search results</h3>
<p>
Certain languages and countries have their own specific sorting
rules (e.g. the sequence in which alphabetic characters follow each other).
Where necessary, these rules can be selected through the
<code>$lc_collate</code> setting in <code>config.php</code>:
</p>
<p>
<code>$lc_collate = "&lt;language&gt;[_&lt;territory&gt;][.&lt;codeset&gt;][@&lt;modifier&gt;]";</code>
</p>

<p>
In practice neither the code set or modifier are widely used, and 
in most cases only the language and territory need to be defined, for
example:
</p>
<p>
<code>$lc_collate = "en_US";</code>
</p>
<p>
(a code set of UTF-8 will be assumed automatically.)
</p>
<h3>Applying custom LDAP filters to directory browsing and searching</h3>
<p>
If is possible to customise the LDAP queries which are used to fetch
data from the directory, for example to display only records which
have specific object classes or meet some other criteria.
</p>
<p>
Sites with Microsoft Active Directory/Exchange may wish to set up
custom filters that test the <code>msExchHideFromAddressLists</code>
and/or <code>showInAddressBook</code> attributes in order to exclude
those entries which are hidden from Exchange's Global Address Book
(GAL).
</p>
<h4>Directory browsing</h4>
<p>
When the user browses through the directory tree directory, the
address book retrieves all records at the user's location
(LDAP base search) that match the criteria specified
by <code>$browse_ldap_filter</code> in <code>config.php</code>.
The default LDAP filter is as follows, which allows all
objects to be displayed:
</p>
<p>
<code>$browse_ldap_filter = "objectClass=*";</code>
</p>
<h4>Search results</h4>
<p>
Searches results are retrieved by carrying out an LDAP
subtree search from the root of the address book (as
specified in <code>$ldap_base_dn</code>). The expression to be searched
for is based on the value of <code>$search_ldap_filter</code>
in <code>config.php</code>. The default LDAP filter is as
follows, which limits search results to objects representing
people:
</p>
<p>
<code>$search_ldap_filter = "(&amp;(objectClass=person)___search_criteria___)";</code>
</p>
<p>
The token <code>___search_criteria___</code> will be replaced with an
expression to search the attributes listed in <code>$search_ldap_attrib</code>
for the string entered by the user. For example if the user searched
for "smith", the token would be replaced by:
</p>
<p>
<code>(|(cn=smith)(mail=smith)(sn=smith)(displayName=smith)(company=smith)(title=smith))</code>
</p>
<p>
To allow all object types to appear in search results, including
organisational units (which typically do not have a <code>cn</code>
attribute set), make the following changes to <code>config.php</code>:
</p>
<ul>
<li>Set <code>$search_ldap_filter = "___search_criteria___";</code>
<li>Add <code>ou</code> to the list of attributes to be searched
    in <code>$search_ldap_attrib</code>.
</ul>
<h3>Changing the layout and attributes shown for directory entries</h3>
<p>
You may want to customise the way in which address book
entries are displayed - which fields/attributes are
used and how they are laid out. If you wish, you can specify
a different layout for each type of record.
</p>

<p>
As shipped, a default layout is provided which displays
the address book entries in three "sections":
</p>
<img alt="Default address book layout, with personal, business/work and additional notes sections" src="layout.png">
<p>
This layout is created by the configuration shown
below. The layout will be used when displaying
<code>inetOrgPerson</code>, <code>user</code>
or <code>contact</code> records.

Specifying <code>*</code> instead of a list of object
classes means that the layout should be applied for
all types of record (unless overridden by another
definition applying to a specific record type). The
layout itself is described as a comma-separated list
of arrays.
</p>
<pre>

$ldap_server->add_display_layout("inetOrgPerson,user,contact",array(
        array("section_name"=>"Personal",
                "attributes"=>array(
                        array("givenName",                      "Given Name",           "contact24.png","allow_view"=>false),
                        array("sn",                             "Surname",              "contact24.png","allow_view"=>false),
                        array("cn",                             "Full Name",            "contact24.png","allow_view"=>false),
                        array("displayName",                    "Preferred Name",       "contact24.png"),
                        array("mail",                           "E-mail",               "mail.png","allow_edit"=>false),
                        array("homePhone",                      "Home Phone",           "landline-phone.png"),
                        array("mobile",                         "Mobile Phone",         "cell-phone.png"),
                        array("wWWHomePage",                    "Web Page",             "internet.png"),
                        array("streetAddress:l:st:postalCode",  "Postal Address",       "address.png"),
                        array("c",                              "Country",              "country.png")
                        )
                ),

        array("section_name"=>"Business/Work","width"=>"50%",
                "attributes"=>array(
                        array("company",                        "Company",              "company.png"),
                        array("url",                            "Web Page",             "internet.png"),
                        array("telephoneNumber",                "Office Phone",         "landline-phone.png"),
                        array("facsimileTelephoneNumber",       "Office Fax",           "fax.png"),
                        array("title",                          "Job Title",            "id.png"),
                        array("department",                     "Department",           "org.png"),
                        array("physicalDeliveryOfficeName",     "Office",               "office.png"),
                        )
                ),

        array("section_name"=>"Additional Notes","new_row"=>true,"colspan"=>2,
                "attributes"=>array(
                        array("info")
                        )
                )
        ));
</pre>

<p>
The <code>givenName</code>, <code>sn</code> and <code>cn</code>
fields will not be visible except while the record is being edited.
The <code>mail</code> field will be read only, and cannot be edited
by end users.
</p>

<p>
Note: Some attributes must always be filled in with a value, for
example many LDAP directories require record types representing
a person to have the surname (<code>sn</code>) attribute filled
in. If you want to be able to create new records through
the Address Book then these attributes <em>must</em> be included
in your directory entry layout so that users can fill them in.
</p>
<ul>
<li><a href="#config_users">Configuring Users and Permissions</a>
describes how to allow creating/editing of records.

<li>Your directory service's schema documentation should list which
attributes must have values.
</ul>

<p>
You can define the following settings for each section:
</p>
<table border=1>
<tr><th>Setting</th><th>Description</th><th>Default if not set</th></tr>
<tr><td><code>section_name</code></td>
    <td>Title to appear above the section.</td>
    <td>Title is not shown.</td></tr>

<tr><td><code>new_row</code></td>
    <td>Whether or not this section should start on a new row.<br>
        In the default setup the "Business/Work" section has
        <code>"new_row"=&gt;false</code> set, so it is displayed to
        the right of "Personal" on the same row. "Additional Notes"
        has <code>"new_row"=&gt;false</code> set, so appears on its
        own row below the previous sections.</td>
        <td>Assumed to be <code>false</code></td></tr>

<tr><td><code>width</code></td>
    <td>Width of the section, specified as a number followed by
        any of the following measurement units (which are those
        supported by the CSS standard):
        <ul>
        <li>% - percentage of the available width
        <li>px - pixels
        <li>em - current font size (traditionally the width of the letter
                 "m" in the font)
        <li>ex - half current font size (traditionally the height of the
                 letter "x" in the font; or the distance between the font
                 baseline and median)
        <li>cm - centimetres
        <li>mm - millimetres
        <li>in - inches
        <li>pt - points (1/72 of an inch)
        <li>pc - picas (1/6 of an inch, or 12 points)
        </ul>
        In the default setup the width of "Business/Work" is set
        to "50%". Any sections on the same row that don't have a
        specified width will automatically use up the remaining
        space.</td>
    <td>User's browser divides up the available width based on
        amount of data to be shown in each section</td></tr>

<tr><td><code>colspan</code></td>
    <td>Number of HTML table columns that this section should span.<br>
        In the default setup the "Additional Notes" section has
        <code>"colspan"=&gt;2</code> set, so spans the width of both
        the "Personal" and "Business/Work" columns.</td>
    <td>Assumed to be <code>1</code></td></tr>

<tr><td><code>attributes</code></td>
    <td>List of attributes to appear in the section.</td>
    <td>(always required)</td></tr>
</table>
<p>
Each attribute is described by either three or four items:
</p>
<ol>
<li>The name of the LDAP attribute (or list of attributes) to be displayed
<li>The caption text to appear next to the attribute (or leave
    empty - "" - for no caption)
<li>Icon image to appear next to the attribute (or leave empty for none)
<li>Whether the attribute should be visible only while the record is
    being edited
</ol>
<p>
A display field can be constructed from several LDAP attributes. To
construct a field from multiple attributes, list the attributes in
turn, separating them with one of the following symbols:
</p>
<table border=1>
<tr><th>Symbol</th><th>Meaning</th></tr>
<tr><td><code>:</code></td><td>Separate attributes with a line break</td></tr>
<tr><td><code>+</code></td><td>Separate attributes with a space</td></tr>
</table>
<p>
This facility is often used to display the lines of an address.
(If the address attributes in your LDAP directory are used to store
business addresses rather than personal addresses you may want
to relocate the "Address" field from the "Personal" to the
"Business/Work" section of the display.)
</p>
<p>
The following changes will be applied automatically:
</p>
<ul>
<li><p>Any web page URLs and e-mail addresses will be presented as
    clickable HTML links.</p>
<li><p>The <code>postalCode</code> attribute is followed by a
    "View Map" link that displays the corresponding location
    in Google Maps (provided that the postal code is valid and
    recognised).</p>

<li>Images contained in the <code>jpegPhoto</code>,
    <code>thumbnailPhoto</code> or <code>thumbnailLogo</code> attributes
    will be scaled to the size indicated by <code>$photo_image_size</code>
    in <code>config.php</code> (96x96 pixels by default). If this
    value is not set then the images will be shown at their native
    size.
</ul>

<p>
More information about displaying images can be found in the following
section.
</p>
<h3>Displaying thumbnail photos or logos when browsing/searching the directory</h3>
<p>
By default, directory entries are displayed next to an
icon representing their object class. Alternatively, the address
book can be set to display an image - typically a photo or logo -
representing the object instead. These images are retrieved from
the following LDAP attributes (listed in order of priority):
</p>
<table border=1>
<tr><th>Attribute</th><th>Description</th></tr>
<tr><td><code>jpegPhoto</code></td><td>Used to store one or
   more images of a person using the JPEG File Interchange
   Format. (Standard ref: IETF RFC 2798) In practice the
   Address Book will only display the first stored image.
</td></tr>
<tr><td><code>thumbnailPhoto</code></td><td>Stores a single
    thumbnail image, maximum size 100K. (Non-standard/Microsoft
    specific)</td>

<tr><td><code>thumbnailLogo</code></td><td>Stores a single
    thumbnail image, maximum size 32K. (Non-standard/Microsoft
    specific)</td>
</table>
<p>
The LDAP Address Book can also display PNG, GIF, WBMP, and GD2 images
stored in these attributes, although JPEG is recommended in all
cases. (WBMP is not the same thing as Microsoft Windows BMP,
which is not supported.) Your PHP installation must have
GD Graphics Library support enabled in order to display image
attributes.
</p>
<p>
To display thumbnail photos/logos instead of "generic" icons,
set one or both of the following options in <code>config.php</code>:
</p>
<table border=1>
<tr><th>Setting</th><th>Description</th></tr>
<tr><td><code>$enable_search_browse_thumbnail = true;</code></td>
    <td>Display thumbnail photos when browsing and in search results</td></tr>

<tr><td><code>$enable_ldap_path_thumbnail = true;</code></td>
    <td>Display thumbnail photo in detail view navigation path</td></tr>
</table>
<p>
Beware that setting <code>$enable_search_browse_thumbnail = true</code>
can result in slow page loading if there are a large number of
images to be displayed.
</p>
<p>
A larger version of these images can be shown on the entry's
detailed view by adding the <code>jpegPhoto</code> and/or
<code>thumbnailPhoto</code> to the display layout (as described
in the previous section). The following settings control the image
size:
</p>
<table border=1>
<tr><th>Setting</th><th>Default value</th><th>Description</th></tr>
<tr><td><code>$thumbnail_image_size</code></td>
    <td><code>24x24</code></td>
    <td>Size of thumbnail images displayed in search results
         and/or detail view navigation path, measured in pixels. For
         optimal layout the size should be the same as the icons
         used to represent object schema classes (24x24 as shipped).
         </td></tr>

<tr><td><code>$photo_image_size</code></td>
    <td><code>96x96</code></td>
    <td>Size of large images displayed in detail view, measured in
        pixels. Set this value to an empty string (or leave
        undefined) to disable scaling of these images.</td></tr>
</table>
<p>
Android devices (at least as of version 4.4) will display the
logo in preference to the photograph wherever a contact record
includes both. To omit the logo from any records that have a photo
(so that the photo will be used) when saving as vCard, set the
following option in <code>config.php</code>:
</p>
<p>
<code>$exclude_logo_if_photo_present = true;</code>
</p>
<h3>Setting up phone numbers to be dialed when clicked on</h3>
<p>
Phone numbers appearing in the directory can be set to be displayed
as HTML links rather than plain text, usually so that the
number will be dialed when clicked on. The way that phone numbers
are converted into URLs can be configured via the
<code>$phone_number_link_template</code> setting in order to
support different types of "click-to-dial" software.
</p>
<p>
The following setting allows many mobile phone browsers and other
platforms that have built-in phone support to dial a number when
clicked on:
</p>
<p>
<code>$phone_number_link_template = "tel:___phone_number___";</code>
</p>
<p>
The following setting will enable phone numbers to be dialed
using Microsoft Skype or other software that handles the
(non-standard) <code>callto:</code> URI scheme:
</p>
<p>
<code>$phone_number_link_template = "callto://___phone_number___";</code>
</p>
<p>
The following settings show how to place a call by passing the
phone number to a separate web application such as Cisco WebDialer:
</p>
<p>
<code>$phone_number_link_template = "https://cucm01/webdialer/Webdialer?destination=___phone_number___";<br>
$phone_number_link_target = "_blank";</code>
</p>
<p>
If defined, the <code>$phone_number_link_target</code> setting
can be used to force the dialer application to open in a
separate window/tab.
</p>
<h3>Changing the links shown in the page footer</h3>
<p>
The links shown in the page footer can be changed using the
<code>$site_footer_links</code> option in <code>config.php</code>.
The default set of links are defined as follows:
</p>
<pre>
$site_footer_links = array(
        array("url"=&gt;"doc/","text"=&gt;"User Guide"),
        array("url"=&gt;"https://sourceforge.net/projects/ldap-addr-book/",
                "text"=&gt;"Get Source Code")
        );
</pre>
<p>
Each link is represented by an array containing its URL and the
name/label text to be displayed.
</p>
<p>
Note: The application's software license requires that you provide
users with a means of obtaining a copy of the source code. As such
you are recommended not to remove the "Get Source Code" link from
the footer, although you may change it to a more appropriate URL
where necessary (e.g. to a copy containing your own local changes,
or if users have only limited connectivity to the external Internet
that would prevent them from accessing the default location.)
</p>
<p>
Please see the <a href="license.html">license agreement</a> for
full information.
</p>
<h3>Changing the look and formatting of the address book</h3>
<p>
The appearance (such as font, text size, colours, etc) of the
address book is defined in the file <code>styles.css</code>.
</p>
<p>
<a href="../styles.css">Take a look at the stylesheet file
(<code>styles.css</code>)</a>
</p>
<p>
You can change any of these settings (or add your own) by creating
your own stylesheet file, called <code>styles_local.css</code> and
adding your changes to it. (Although you could modify
<code>styles.css</code> directly it will be easier to upgrade to
future versions of the address book if you keep your changes
separate by using <code>styles_local.css</code> instead.)
</p>
<p>
The stylesheet file is made up of
<span style="font-style:italic">selectors</span> which specify which
part of the user interface is to be changed, followed by
<span style="font-style:italic">style directives</span> surrounded
by {...} to define how it should appear. For example, if you wanted to
dispay the address book in a different font you might add
the following to your own <code>styles_local.css</code> file and
change the <code>font-family</code> setting to your own choice of font:
</p>
<pre>
body,table,textarea {
        font-family:serif;
}
</pre>
<p>
Where you don't redefine a setting in <code>styles_local.css</code>
(such as <code>font-size:10pt</code> in this example) the value
from <code>styles.css</code> will continue to be used.
</p>
<p>
The following table summarises the CSS selectors used within
<code>styles.css</code> and which part of the address book's
appearance they affect:
</p>
<table border=1>
<tr><th>CSS Selector</th><th>Typically used to change the font, size,
        colour, etc, of...</th></tr>
<tr><td><code>body,table,textarea</code></td>
    <td>The address book as a whole.</td></tr>
<tr><td><code>.ldap_navigation_path li:first-child</code></td>
    <td>The address book title, which is shown as the left-most item in the
        "Navigation Path" shown at the top of each page.</td></tr>

<tr><td><code>.ldap_navigation_path li+li:before</code></td>
    <td>Organisational units, folders, etc, shown in the
        "Navigation Path" at the top of each page. The left-most
        element of the navigation path (typically used to show
        the address book title) is styled separately, described
        above.</td></tr>

<tr><td><code>.page_footer</code></td>
    <td>Page footer.</td></tr>

<tr><td style="white-space:nowrap">
    <code>.ldap_entry_viewer_section .column_header,<br>
        .search_results_viewer .column_header</code></td>
    <td>Column headers/titles used in search results and
        directory entries.(*)</td></tr>

<tr><td><code>.ldap_entry_viewer_section td,<br>
        .search_results_viewer td</code></td>
    <td>Data displayed in search results and directory entries.(*)
        Note: The appearance of LDAP attributes can be customised
        individually, as described below.</td></tr>

<tr><td><code>.ldap_entry_viewer_section th</code></td>
    <td>Name/label text that appears to the left of each
        attribute shown in a directory entry.</td></tr>

</table>
<p>
(* These may be split into two separate style declarations if
you want to customise the search results and directory entry
detail pages separately.)
</p>
<p>
You can also change the way in which an individual LDAP attribute
is displayed by applying style directives to
 <code>.ldap_attribute_&lt;attrib&gt;</code>,
where <code>&lt;attrib&gt;</code> is the attribute to be
customised. <p>For example, adding the following to
<code>styles_local.css</code> will cause home telephone numbers
(stored in the <code>homePhone</code> attribute) to be displayed
in italic:
</p>
<pre>
.ldap_attribute_homePhone
{
        font-style:italic;
}
</pre>
<p>
As a further example, adding the following to <code>styles_local.css</code>
will display SSH public keys (stored in the <code>sshPublicKey</code>
attribute) to be displayed in a fixed-width font and word-wrapped more
appropriately:
</p>
<pre>
.ldap_attribute_sshPublicKey
{
        font-family:monospace;
        word-break:break-all;
}
</pre>

<h3>Changing the country code interpretation</h3>
<p>
Country codes in LDAP directories normally follow the
ISO 3166 standard. The <code>$country_code_standard</code> setting
in <code>config.php</code> contains a comma-separated
list of which parts of the standard should be used by the
Address Book. By default, only the ISO 3166-1 alpha2 officially
assigned codes will be used:
</p>
<p>
<code>$country_code_standard="official";</code>
</p>
<p>
If your records use country codes for countries which have
since been renamed or are no longer in existance, you may want
to enable additional parts of ISO 3166, for example:
</p>
<p>
<code>$country_code_standard="official,transitional,former";</code>
</p>
<p>
This will enable the correct country names to be displayed,
and for the older country codes to be selected from drop-down
lists. The following table summarises the available country
code standards:
</p>
<table border=1>
  <tr><th>Country Code Setting</th><th>Description</th></tr>
  <tr>
    <td><code>official</code></td>
    <td>ISO 3166-1 Officially Assigned Codes</td>
  </tr>
  <tr>
    <td><code>user</code></td>
    <td>ISO 3166-1 User-Assigned Codes
    <p>
    Country codes that have been reserved for organisations that
    use ISO 3166 to add further codes to their in-house
    implementations. Several of the more widely used/known
    country codes are listed by name.</p></td>
  </tr>
  <tr>
    <td><code>exceptional</code></td>
    <td>ISO 3166-1 Exceptional Reservations
    <p>
    Reserved at the request of national ISO member bodies. Usage other
    than for the specific purpose which justified the reservation is
    discouraged. (See comments against each exceptional reservation
    in file <code>lib/country.php</code> for individual
    explanations.)</p></td>
  </tr>
  <tr>
    <td><code>transitional</code></td>
    <td>ISO 3166-1 Transitional Reservations
    <p>
    Former official ISO 3166-1 country codes, reserved against
    reassignment (typically for 50 years) whilst existing historical
    use are gradually phased out. These are also listed in ISO 3166-3
    as former country codes.</p></td>
  </tr>
  <tr>
    <td><code>indeterminate</code></td>
    <td>ISO 3166-1 Indeterminate Reservations
    <p>
    International vehicle registration codes, reserved against reuse
    in ISO 3166-1 for an indeterminate period until existing
    historical uses have been sufficiently phased out.</p></td>
  </tr>
  <tr>
    <td><code>former</code></td>
    <td>ISO 3166-3 Formerly Assigned Codes<br>
    <p>
    Previously assigned ISO 3166-1 alpha2 codes for countries that are
    no longer in existance.</p></td>
  </tr>
</table>

<h3>Extending and modifying the schema</h3>
<p>
The <em>schema</em> is a set of information which the Address Book uses
to display and edit the different types of records. The schema information
is stored inside the Address Book's <code>schema</code> subdirectory.
The set of files that is loaded and used depends on the server type
and/or on additional entries in the configuration file. The default
set schema files used for each server type are:
</p>
<table border=1>
<tr><th>Server type</th><th>Schema configuration files used</th></tr>

<tr><td>ad</td><td>microsoft</td></tr>
<tr><td>edir</td><td>novell</td></tr>
<tr><td>openldap</td><td>core, cosine, inetorgperson</td></tr>
<tr><td>custom</td><td>(none)</td></tr>
</table>

<p>
You can load an additional schema file using <code>$ldap_server->add_schema()</code>
from the configuration file. For example, the following commands will connect
to an OpenLDAP server and allow objects and enable the Mozilla Address Book schema
to be used (and displayed correctly) in addition to the defaults (<code>core</code>, 
<code>cosine</code> and <code>inetorgperson</code>):
</p>
<pre>
$ldap_server = new ldap_server("openldap","ldap.example.org");
$ldap_server->add_schema("mozilla");
</pre>
<p>
The following schema files are supplied with the Address Book. (Future versions
may include additional files.)
</p>

<table border=1>
<tr><th>Schema File</th><th>Description</th></tr>
<tr><td>core</td>

<td>Basic objects and attributes which make up the directory structure
(such as definitions of person or surname). Adapted from on X.500 directory
standards, described in IETF's RFC 2252 and RFC 2256.</td></tr>

<tr><td>cosine</td>

<td>Additional objects/attributes which were identified and adopted as a
result of the COSINE (Co-operation and Open Systems Interconnetion in Europe)
initiative's PARADISE directory pilot project in the early 1990s. Described
in IETF RFC 1124 (and its successors).</td></tr>

<tr><td>dhcp</td>

<td>Allows the Address Book to be used to manage the Internet Software
Consortium DHCP Server (dhcpd). This also allows a pair of DHCP servers
to be set up as a failover cluster, sharing configuration and IP address
lease data through an LDAP directory.</td></tr>

<tr><td>inetorgperson</td>

<td>Enhanced object class for recording details of a person in an
"organizational context" (e.g. a member of staff) on an Internet/Intranet
directory. Described in IETF RFC 2798.</td></tr>

<tr><td>microsoft</td>

<td>Objects and attributes used in Microsoft Active Directory ("AD"). These
include redefinitions of Core, COSINE and inetOrgPerson (often with subtle
differences) together with numerous Microsoft-specific classes.</td></tr>

<tr><td>mozilla</td>

<td>Extends inetOrgPerson for storing additional attributes used by the
address book feature of Mozilla Thunderbird and related products.</td></tr>

<tr><td>nis</td>

<td>Allows the Address Book to manage a Network Information Service (NIS)
server that has been set up to store its configuration data in LDAP.
This is typically used for centrally managing UNIX/Linux-type
operating systems on a network.</td></tr>

<tr><td>novell</td>

<td>Objects and attributes used in Novell eDirectory (formerly called
Novell Directory Services, NDS). These include redefinitions of Core, COSINE,
NIS and inetOrgPerson (often with subtle differences) together with numerous
Novell-specific classes.</td></tr>

<tr><td>openldap</td>

<td>Versions of the organisation, OU and Internet/intranet organisational
person objects with additional attributes, as used in the OpenLDAP Project's
own directory schema.</td></tr>

<tr><td>oracle</td>

<td>Objects and attributes used to store information about Oracle databases
and services in a central directory. Oracle clients can look up this
information via LDAP instead of a locally-stored <code>tnsnames.ora</code> file
on each machine.</td></tr>

<tr><td>ppolicy</td>

<td>Defines objects for storing an LDAP directory's password policy within
the directory itself. Administrators of OpenLDAP servers can configure the
<code>ppolicy</code> overlay module to read these records and apply the policy
settings.</td></tr>

<tr><td>schac</td>

<td>Objects and attributes used to represent personal records in educational
institutions (Schema for Academia).</td></tr>

</table>

<h4>Defining your own objects and attributes</h4>
<p>
Unless configured otherwise, the Address Book will display unrecognised
object and attribute classes as follows:
</p>
<ul>
<li>Object classes will be displayed as a "leaf" object (i.e. not a folder).
A generic icon will be displayed next to the object (unless thumbnail display
is turned on and an image is available from the <code>jpegPhoto</code>,
<code>thumbnailPhoto</code> or <code>thumbnailLogo</code> attribute.)
Users will not be able to create new objects of this class.

<li>Attributes will be displayed and edited as a single text value.
(If the attribute is multi-valued, only the first value will be displayed
or saved after editing.)
</ul>
<p>
This default behavior can be modifed and extended by defining the object or
attribute class (or enabling a schema file that defines it).
</p>
<p>
The following example shows how to define a <code>container</code> object class
(similar to the one defined in the <code>microsoft</code> schema). The class
which should appear as a folder - similar to an OU - so that users can navigate
into it and see further objects inside. Users with <code>allow_create</code>
permission should be able to create <code>container</code> objects from within
the Address Book's user interface:
</p>
<pre>
$ldap_server->add_object_class("container",array(
	"icon"=>"folder.png",
	"is_folder"=>true,
	"display_name"=>"Container",
	"can_create"=>true)
	);
</pre>
<p>
The following example defines <code>sshPublicKey</code> as a
multi-valued text attribute (data type <code>text_list</code>) intended
to hold a list of the user's SSH public keys.
</p>
<pre>
$ldap_server->add_attribute_class("sshPublicKey",array(
	"data_type"=>"text_list",
	"display_name"=>"SSH Public Key")
	);
</pre>
<p>
Existing object and attribute classes can be deleted as follows:
</p>
<pre>
delete_object_class($name);

delete_attribute_class($name);
</pre>
<p>
(The main use of this is to delete an existing class so that you
can redefine it with different settings.)
</p>

<h4>Object class schema settings</h4>
<p>
The following settings can be used in object class definitions:
</p>
<table border=1>
<tr><th>Setting</th><th>Default</th><th>Description</th></tr>
<tr><td>icon</td><td>generic24.png</td><td>Filename of an icon image to appear next to objects of this class</td></tr>
<tr><td>is_folder</td><td>false</td><td>Whether the object class should be displayed as a folder</td></tr>
<tr><td>display_name</td><td>(class name)</td><td>Display name of the object class</td></tr>
<tr><td>can_create</td><td>false</td><td>Whether objects of this class can be created frmo within the address book</td></tr>
<tr><td>rdn_attrib</td><td>cn</td><td>Attribute which should be used as the RDN</td></tr>
<tr><td>required_attribs</td><td>(none)</td><td>Comma-separated list of attributes which are not permitted to be empty</td></tr>
</table>
<p>
The attribute used in the object's name (the RDN attribute) must always have a value
and does not need to be listed in <code>required_attribs</code>.
</p>
<h4>Attribute class schema settings</h4>
<p>
The following settings can be used in attribute class definitions:
</p>
<table border=1>
<tr><th>Setting</th><th>Default</th><th>Description</th></tr>
<tr><td>data_type</td><td>text</td><td>Data type of this attribute (as per below)</td></tr>
<tr><td>display_name</td><td>(class name)</td><td>Display name of the attribute class</td></tr>
</table>

<h4>Attribute data types</h4>

<p>
The following values can be used in an attribute class's <code>data_type</code> setting
in order to indicate the type of data and how it should be displayed/edited:
</p>
<table border=1>
<tr><th>Data Type</th><th>Description</th></tr>
<tr><td>ad_group_type</td><td>Active Directory group type and scope (<code>microsoft</code> schema)</td></tr>
<tr><td>country_code</td><td>Country code</td></tr>
<tr><td>date</td><td>Date.</td></tr>
<tr><td>date_time</td><td>Date and time</td></tr>
<tr><td>dn_list</td><td>List of other objects in the directory, e.g. group members</td></tr>
<tr><td>gender</td><td>Gender</td></tr>
<tr><td>image</td><td>Image</td></tr>
<tr><td>phone_number</td><td>Phone number</td></tr>
<tr><td>postcode</td><td>Post code</td></tr>
<tr><td>text</td><td>Single line of text</td></tr>
<tr><td>text_area</td><td>Multi-line text value (e.g. notes)</td></tr>
<tr><td>text_list</td><td>List of text values</td></tr>
<tr><td>use_html_mail</td><td>Boolean, presented as a choice whether HTML mail is prefered (<code>mozilla</code> schema)</td></tr>
<tr><td>yes_no</td><td>Boolean, presented as a yes/no choice</td></tr>
</table>

<hr>
<a name="config_reference"></a>
<h2>Configuration Reference</h2>
<table border=1>
<tr><th>Setting</th><th>Description</th></tr>
<tr><td><code>$site_name</code></td><td>Site name, which appears in the
        browser title bar. You may want to
		customise this, e.g. with your company name.
                <p>Example:<br>
                <code>$site_name = "BigCorp Address Book";</code>
                </p></td></tr>

<tr><td><code>$site_footer_links</code></td><td>List of links that
     appear in the footer of each page.
     <br>&nbsp;<br>Example:<br>
<pre>$site_footer_links = array(
        array("url"=&gt;"doc/","text"=&gt;"User Guide"),
        array("url"=&gt;"https://sourceforge.net/projects/ldap-addr-book/",
                "text"=&gt;"Get Source Code")
        );</pre>
</td></tr>

<tr><th colspan=2>Connection to LDAP Directory</th></tr>

<tr><td><code>$ldap_server</code></td>
    <td>Creates a connection to the LDAP server holding the address book
    data. The following information needs to be provided about the server:
    <ul>
    <li><p>LDAP server type. The following
        values are accepted:</p>
        <p>
        <code>ad</code> - Microsoft Active Directory
        (or Samba 4 Active Directory)<br>
        <code>edir</code> - Novell eDirectory<br>
        <code>openldap</code> - OpenLDAP (core/inetorgperson schema)</p>
    <li><p>Host name, port number or LDAP URL (or several, separated by spaces)</p>
    <li><p>Port number (optional)</p>
    </ul>
    <p>Examples:<br>
    <code>$ldap_server = new ldap_server("openldap","ldap.example.org");</code><br>

    <code>$ldap_server = new ldap_server("openldap","ldap.example.org ldap-backup.example.org");</code>
     - fail over to a backup LDAP server if first is not available<br>

    <code>$ldap_server = new ldap_server("openldap","ldapi://",0);</code>
     - connect to local server via a UNIX domain socket</p>

    <p>Active Directory-specific Options:</p><p>
    (1) As an alternative to giving the name of a specific server (domain
    controller) you can specify just the domain name. This will load
    balance the connections across the available domain controllers.
    (See Microsoft KB 842197 for further information on how to use DNS
    netmask ordering for more fine-grained control of the servers
    used for load balancing.)</p>
    <p>
    (2) For multi-domain forests, specify the LDAP port number as 3268
    in order to use the AD Global Catalogue. (By comparison, using the
    default LDAP port (389) will return incomplete information other
    than for the local AD domain.)
    </p>
    <p>
    <code>$ldap_server = new ldap_server("ad","example.org");</code>
     - load balances across the DCs as listed in DNS<br>
    <code>$ldap_server = new ldap_server("ad","dc1.example.org",3268);</code>
     - use AD global catalogue port<br>
    </p>
    <p>
    For further information,
    see:<a href="http://www.php.net/manual/en/function.ldap-connect.php">
    http://www.php.net/manual/en/function.ldap-connect.php</a>
    </p>
    </td></tr>

<tr><td><code>$ldap_base_dn</code></td><td>Specifies the search base
    within the directory which will be used for displaying the address
    book. Rather than searching the whole directory, you can use this
    option to restrict search results to only a specific part of the
    directory tree which contains the user accounts or contacts.
    <p>
    Examples:<br>
    <code>$ldap_base_dn = "dc=example,dc=org";</code><br>
    <code>$ldap_base_dn = "ou=Users,dc=example,dc=org";</code>
    </p>
    <p>
    Syntax where one of the OU names contains a space:<br>
    <code>$ldap_base_dn = "ou=User Accounts,dc=example,dc=org";</code>
    </p>
</td></tr>

<tr><td><code>$ldap_server-&gt;dn_search_base</code></td>
    <td>Specifies the search base within the directory for looking
    up a potential user's DN during the login process.
    <p>
    Example:<br>
    <code>$ldap_server-&gt;dn_search_base = "cn=Users,dc=example,dc=org"</code>
    </p></td></tr>

<tr><td><code>$ldap_server-&gt;dn_search_user</code></td>
    <td>Temporary user name (bind DN) used by the address book software
    to search the LDAP directory for a user's DN when logging in.
    The corresponding password should be provided in
    <code>$ldap_server-&gt;dn_search_password</code>.
    <p>
    Examples:<br>
    <code>$ldap_server-&gt;dn_search_user
    = "cn=LDAPUserLookup,cn=Users,dc=example,dc=org";</code><br>
    <code>$ldap_server-&gt;dn_search_user = "cn=LDAPUserLookup,dc=MyDirectory";</code><br>
    <code>$ldap_server-&gt;dn_search_user = "LDAPUserLookup@example.org";</code>
     - Active Directory specific syntax<br>
    </p>
    <p>If the directory is set up to allow read access without having
    to log on then just leave the user name and password blank
    (which will perform an "anonymous bind").</p></td></tr>

<tr><td><code>$ldap_server-&gt;dn_search_password</code></td>
    <td>Password corresponding to the account specified in
    <code>$ldap_server-&gt;dn_search_user</code>, which is used by the
    address book software to search the LDAP directory for a user's
    DN when logging in.
    <p>Example:<br>
    <code>$ldap_server-&gt;dn_search_password  = "password";</code>
    </p></td></tr>

<tr><td><code>$ldap_server-&gt;add_user()</code></td>
    <td>Specifies the mapping between address book logins and the
    back-end directory when per-user authentication is enabled.
    (see <a href="#config_users">Configuring Users and Permissions<a>
    for further information.)
    <br>&nbsp;<br>
    This setting can be repeated for however many user mappings
    need are needed.

    <br>&nbsp;<br>Example:<br>
    <pre>$ldap_server-&gt;add_user("__ANONYMOUS__",
        array(
                "ldap_dn"=&gt;"CN=ldap-browse,O=example",
                "ldap_password"=&gt;"foobar",
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true
        ));
$ldap_server-&gt;add_user("__DEFAULT__",
        array(
                "allow_browse"=&gt;true,
                "allow_search"=&gt;true,
                "allow_view"=&gt;true,
                "allow_create"=&gt;true,
                "allow_edit"=&gt;true,
                "allow_delete"=&gt;true
        ));</pre>(allows read-only access to anyone, log in by name in order to edit records)</td></tr>

<tr><td><code>$ldap_server->follow_referrals</code></td>
    <td>Causes the address book to attempt to follow LDAP referrals.
     <br>&nbsp;<br>
     Referrals are used where the contents of the LDAP directory
     are divided between several servers, with a different section
     of the directory stored on each. This is normally used only
     in larger organisations. A referral is a message which indicates
     that the requested information is stored
     on a different server. If <code>follow_referrals</code>
     is set to true the Address Book will attempt to connect to
     the other server to retrieve the information.
     <br>&nbsp;<br>
     Beware: This feature is currently experimental.
     <br>&nbsp;<br>
     In Microsoft Active Directory, referrals are used where
     several domains have been joined into a "forest". As an
     alternative to using referrals, the LDAP Address Book can
     be set up to use the forest's Global Catalog (by connecting
     to an alternate LDAP service running on port 3268 - see
     description of <code>$ldap_server</code> above). Not all
     attributes are stored in the Global Catalogue by
     default - for example job titles and department information.
     Missing attributes can be added to the Global Catalog
     using the "Active Directory Schema" admin tool.
     <p>
     Example:<br>
     <code>$ldap_server->follow_referrals = true;</code>
     </p></td></tr>

<tr><th colspan=2>Search/Browse Directory Settings</th></tr>

<tr><td><code>$search_ldap_attrib</code></td>
    <td>This specifies which attributes (fields) get searched when a
     user searches the address book. Add to the list if you have
     specific requirements, e.g. if you want users to be able to
     search on a department name (department) or building
     (physicalDeliveryOfficeName).
     <p>
     Example:<br>
     <code>$search_ldap_attrib = array("cn","mail","sn","displayName","company","title");</code>
     </p></td></tr>

<tr><td><code>$search_ldap_filter</code></td>
    <td>Specifies the LDAP filter to be applied when searching
     through records in the directory. The token
     <code>___search_criteria___</code> will be replaced with
     an expression to search the attributes listed in
     <code>$search_ldap_attrib</code> for the string entered by
     the user.
     <p>
     Example:<br>
     <code>$browse_ldap_filter = "(&amp;(objectClass=person)___search_criteria___)";</code>
     </p></td></tr>

<tr><td><code>$browse_ldap_filter</code></td>
    <td>Specifies the LDAP filter to be applied when browsing
     through records in the directory. This is normally set to
     <code>objectClass=*</code>, which allows all records in
     the directory to be displayed.
     <p>
     Example:<br>
     <code>$browse_ldap_filter = "objectClass=*";</code>
     </p></td></tr>

<tr><td><code>$search_result_columns</code></td>
    <td>Specifies the column layout to be used for displaying
    search results. Each column has three fields associated with it:
    <ul>
    <li><code>caption</code> - Caption to appear in column heading
    <li><code>attrib</code> - LDAP attribute to display
    <li><code>link_type</code> - Whether and how to display the attribute
        as a hyperlink. This field can be ommitted if not used.
    </ul>
    <p>
    The special attribute <code>sortableName</code> will display constructed
    "sort-friendly" version of a personal name (Surname, Firstname)
    based on which LDAP attributes are populated. (Ideally
    <code>sn</code> and <code>givenName</code> if populated, otherwise
    falling back to <code>displayName</code> or <code>cn</code>.)
    </p>
    Example:
    <pre>$search_result_columns = array(
        array("caption"=&gt;"Name",                "attrib"=&gt;"sortableName",       "link_type"=&gt;"object"),
        array("caption"=&gt;"E-Mail",              "attrib"=&gt;"mail"),
        array("caption"=&gt;"Office Phone",        "attrib"=&gt;"telephoneNumber"),
        array("caption"=&gt;"Organisation",        "attrib"=&gt;"company")
        );</pre>
    <p>
    The syntax <code>"link_type"=&gt;"object"</code> indicates that values
    in the the name (<code>sortableName</code>) column should show as links
    to show more information about each object. It is recommended to place
    record names in the left-most column, shown as links.
    </p>
</td></tr>

<tr><td><code>$search_result_default_sort_order</code></td>
    <td>Specifies the default sort order for displaying search
     results. User can change the sort order by clicking a column
     header.
     <p>
     Example:<br>
     <code>$search_result_default_sort_order = "sortableName";</code>
     </p></td></tr>

<tr><td><code>$enable_search_suggestions</code></td>
    <td>Specifies whether search results from the directory
    should be the &quot;suggested&quot; as the user types in
    search terms. It may be more appropriate to disable this
    facility in large installations in order to reduce
    server load.
    <p>
    Example:<br>
    <code>$enable_search_suggestions = true;</code>
    </p></td></tr>

<tr><td><code>$lc_collate</code></td>
    <td>Specifies the collation locale (sorting language/region/script)
    to be used for browsing and displaying search results.
    <p>
    Example:<br>
    <code>$lc_collate = "en_US";</code>
    </p></td></tr>

<tr><td><code>$search_method</code></td>
    <td>Specifies the search result matching method to be used.
    This setting is optional, included to allow users to restore
    legacy search behavior should they wish. Allowed values
    are:
    <dl>
    <dt>1</dt><dd>match anywhere in string (default search behavior)</dd>
    <dt>2</dt><dd>match start of string only (behavior like versions 0.20 and earlier)</dd>
    </dl>
    <p>
    Example:<br>
    <code>$search_method = 1;</code>
    </p></td></tr>

<tr><th colspan=2>Detailed Info View</th></tr>

<tr><td><code>$ldap_server->add_display_layout()</code></td>
    <td>Specifies the attributes to be shown in detailed entry view
    and how they should be layed out. See the section "Changing the
    layout and attributes shown for directory entries" above for
    further information.
<br>&nbsp;<br>Example:<br>
<pre>
// Display information about a printer in Active Directory

$ldap_server->add_display_layout("printQueue",array(
    array("section_name"=>"Shared Printer",
        "attributes"=>array(
            array("printerName",                    "Printer",              "microsoft/printer24.png"),
            array("location",                       "Location",             "address.png"),
            array("driverName",                     "Driver/Model",         "generic24.png"),
            array("description",                    "Description",          "description.png")
            )
        ),

    array("section_name"=>"Capabilities","width"=>"50%",
        "attributes"=>array(
            array("printColor",                     "Color Printing",       "generic24.png"),
            array("printStaplingSupported",         "Stapling",             "generic24.png"),
            array("printDuplexSupported",           "Double-Sided Printing","generic24.png"),
            array("printRate",                      "Printing Speed (PPM)", "generic24.png"),
            array("printMaxResolutionSupported",    "Max. Resolution (DPI)","generic24.png")
            )
        ),

    array("section_name"=>"Print Server","new_row"=>true,"colspan"=>2,
        "attributes"=>array(
            array("serverName",                     "Host Name",            "microsoft/computer24.png"),
            array("uNCName",                        "Printer UNC Path",     "microsoft/domain24.png")
            )
        ),

    array("section_name"=>"Paper Available","new_row"=>true,"colspan"=>2,
        "attributes"=>array(
            array("printMediaReady")
            )
        )
    ));
</pre>
</td></tr>

<tr><th colspan=2>Photo/Image Display Settings</th></tr>

<tr><td><code>$enable_search_browse_thumbnail</code></td>
    <td>Specifies whether thumbnail images should be displayed next
        to directory entries in browse/search results view
        (if available) instead of object class icons.
        <p>Example:<br>
        <code>$enable_search_browse_thumbnail = true</code></p></td></tr>

<tr><td><code>$enable_ldap_path_thumbnail</code></td>
    <td>Specifies whether thumbnail images should be displayed in
        the detailed info view's "navigation path" (if available)
        instead of object class icons.
        <p>Example:<br>
        <code>$enable_ldap_path_thumbnail = true</code></p></td></tr>

<tr><td><code>$thumbnail_image_size</code></td>
    <td>Size to which images should be scaled for use as
        thumbnails/icons.
        <p>Example:<br>
        <code>$thumbnail_image_size = "24x24";</code>
        </p></td></tr>

<tr><td><code>$photo_image_size</code></td>
    <td>Size to which images should be scaled for display in
        the detailed info view. Set to an empty string (or
        leave undefined) to disable scaling of these
        images.
        <p>Example:<br>
        <code>$photo_image_size = "96x96";</code>
        </p></td></tr>

<tr><th colspan=2>Computer/Telephony Integration Settings</th></tr>

<tr><td><code>$phone_number_link_template</code></td>
    <td>Specifies if and how phone numbers should be displayed
        as clickable links (e.g. to support "click-to-dial"
        functionality). Leaving this setting blank (or not setting
        it at all) will display phone numbers as plain text rather
        than a link.
        <p>
        The token "___phone_number___" will be replaced with the
        actual phone number to be dialed.
        </p>
        <p>Examples:</p>
        <p>Enable click-to-dial support on many mobile phone web browsers:</p>
        <p><code>$phone_number_link_template = "tel:___phone_number___";</code></p>
        <p>Enable click-to-dial by calling Cisco WebDialer 
        running on host <code>cucm01</code>:</p>
        <p><code>$phone_number_link_template = "https://cucm01/webdialer/Webdialer?destination=___phone_number___";<br>
        $phone_number_link_target = "_blank";</code>
        </p></td></tr>

<tr><td><code>$phone_number_link_target</code></td>
    <td>Specifies a value for a phone number link's "target" attribute.
        It may be useful to set this to "_blank" for certain
        click-to-dial software or if the address book is set up to run
        inside a HTML frame.
        <p>Example:<br>
        <code>$phone_number_link_target = "_blank";</code>
        </p></td></tr>

<tr><th colspan=2>Data Export Settings</th></tr>

<tr><td><code>$exclude_logo_if_photo_present</code></td>
    <td>Specifies whether logo images (from the
        <code>thumbnailLogo</code> attribute) should be
        omitted when exporting as vCard if a photograph is
        also present. This may be useful when transfering
        records from the Address Book to Android devices.
        <p>Example:<br>
        <code>
        $exclude_logo_if_photo_present = true;</code>
        </p></td></tr>


<tr><th colspan=2>Date and Time Display Settings</th></tr>

<tr><td><code>$date_format</code></td>
    <td>Specifies the format/layout for displaying attributes
        containing dates on an LDAP entry's "detailed info" page.
        <p>
        The following tokens (each consisting of <code>%</code> followed by a
        letter) used to describe the format/layout:
        </p>
        <ul>
        <li><code>%a</code> - An abbreviated textual representation of the day
        <li><code>%A</code> - A full textual representation of the day
        <li><code>%d</code> - Two-digit day of the month (with leading zeros)
        <li><code>%e</code> - Day of the month, with a space preceding single digits. (Not implemented on Windows.)
        <li><code>%j</code> - Day of the year, 3 digits with leading zeros
        <li><code>%u</code> - ISO-8601 numeric representation of the day of the week
        <li><code>%w</code> - Numeric representation of the day of the week
        <li><code>%U</code> - Week number of the given year, starting with the first Sunday as the first week
        <li><code>%V</code> - ISO-8601:1988 week number of the given year, starting with the first week of the year with at least 4 weekdays, with Monday being the start of the week
        <li><code>%W</code> - A numeric representation of the week of the year, starting with the first Monday as the first week
        <li><code>%b</code> - Abbreviated month name, based on the locale
        <li><code>%B</code> - Full month name, based on the locale
        <li><code>%h</code> - Abbreviated month name, based on the locale (an alias of <code>%b</code>)
        <li><code>%m</code> - Two digit representation of the month
        <li><code>%C</code> - Two digit representation of the century (year divided by 100, truncated to an integer)
        <li><code>%g</code> - Two digit representation of the year going by ISO-8601:1988 standards (see <code>%V</code>)
        <li><code>%G</code> - The full four-digit version of <code>%g</code>
        <li><code>%y</code> - Two digit representation of the year
        <li><code>%Y</code> - Four digit representation for the year
        <li><code>%D</code> - Same as <code>%m/%d/%y</code>
        <li><code>%F</code> - Same as <code>%Y-%m-%d</code> (commonly used in database datestamps)
        <li><code>%x</code> - Preferred date representation based on locale (without the time)
        <li><code>%n</code> - A newline character (<code>\n</code>)
        <li><code>%t</code> - A Tab character (<code>\t</code>)
        <li><code>%%</code> - A literal percentage character (<code>%</code>)
        </ul>
        <p>(information based on PHP manual)</p>
        <p>Example:<br>
        <code>
        $date_format = "%A %d %B %Y";</code>
        </p></td></tr>

<tr><td><code>$date_time_format</code></td>
    <td>Specifies the format/layout for displaying attributes
        containing dates and times (timestamps) on an address book
        entry's "detailed info" page.
        <p>
        See the description of <code>$date_format</code> (above)
        for a list of tokens (each consisting of <code>%</code> followed by a
        letter) used to describe the format/layout. The following
        additional tokens may be used to describe the time:
        </p>
        <ul>
        <li><code>%H</code> - Two digit representation of the hour in 24-hour format
        <li><code>%k</code> - Two digit representation of the hour in 24-hour format, with a space preceding single digits
        <li><code>%I</code> - Two digit representation of the hour in 12-hour format
        <li><code>%l</code> - Hour in 12-hour format, with a space preceding single digits
        <li><code>%M</code> - Two digit representation of the minute
        <li><code>%p</code> - Upper-case 'AM' or 'PM' based on the given time
        <li><code>%P</code> - Lower-case 'am' or 'pm' based on the given time
        <li><code>%r</code> - Same as <code>%I:%M:%S %p</code>
        <li><code>%R</code> - Same as <code>%H:%M</code>
        <li><code>%S</code> - Two digit representation of the second
        <li><code>%T</code> - Same as <code>%H:%M:%S</code>
        <li><code>%X</code> - Preferred time representation based on locale, without the date
        <li><code>%z</code> - The time zone offset. Not implemented as described on Windows. See below for more information.
        <li><code>%Z</code> - The time zone abbreviation. Not implemented as described on Windows. See below for more information.
        <li><code>%c</code> - Preferred date and time stamp based on locale
        <li><code>%s</code> - Unix Epoch Time timestamp (same as the <code>time()</code> function)
        </ul>
        <p>Example:<br>
        <code>
        $date_time_format = "%A %d %B %Y %H:%M:%S";</code>
        </p></td></tr>

<tr><td><code>$short date_format</code></td>
    <td>Specifies a more compact format/layout for displaying
       attributes containing dates shown when browsing or searching
       the address book.
        <p>
        See the description of <code>$date_format</code> (above)
        for a list of the tokens (each consisting of <code>%</code> followed by a
        letter) used to describe the format/layout.
        </p>
        <p>Example:<br>
        <code>
        $short_date_format = "%d %b %Y";</code>
        </p></td></tr>

<tr><td><code>$short date_time_format</code></td>
    <td>Specifies a more compact format/layout for displaying
       attributes containing dates and times (timestamps) shown when
       browsing or searching the address book.
        <p>
        See the descriptions of <code>$date_format</code> and
        <code>$date_time_format</code> (above)
        for lists of the tokens (each consisting of <code>%</code> followed by a
        letter) used to describe the format/layout.
        </p>
        <p>Example:<br>
        <code>
        $short_date_time_format = "%d %b %Y %H:%M:%S";</code>
        </p></td></tr>

<tr><th colspan=2>Schema Configuration</th></tr>

<tr><td><code>$ldap_server->add_schema()</code></td>
    <td>Adds the contents of a schema file to the Address Book.
     <p>
     Example:<br>
     <code>$ldap_server->add_schema("mozilla");</code>
     </p></td></tr>

<tr><td><code>$ldap_server->add_object_class()</code></td>
    <td>Adds a new object class to the schema.
     <p>
     Example:<br>
     <pre>$ldap_server->add_object_class("container",array(
	"icon"=>"folder.png",
	"is_folder"=>true,
	"display_name"=>"Container",
	"can_create"=>true)
	);</pre>
     </p></td></tr>

<tr><td><code>$ldap_server->add_attribute_class()</code></td>
    <td>Adds a new attribute class to the schema.
     <p>
     Example:<br>
     <pre>$ldap_server->add_attribute_class("sshPublicKey",array(
	"data_type"=>"text_list",
	"display_name"=>"SSH Public Key")
	);</pre>
     </p></td></tr>

<tr><td><code>$ldap_server->delete_object_class()</code></td>
    <td>Deletes an object class from the schema.
     <p>
     Example:<br>
     <code>$ldap_server->delete_object_class("container");</code>
     </p></td></tr>

<tr><td><code>$ldap_server->delete_attribute_class()</code></td>
    <td>Deletes an attribute class from the schema.
     <p>
     Example:<br>
     <code>$ldap_server->delete_attribute_class("container");</code>
     </p></td></tr>

</table>
</body>
</html>
